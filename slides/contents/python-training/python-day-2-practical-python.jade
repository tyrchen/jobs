---
template: slide2.jade
title: scrapy
date: 2014-04-16 20:50
theme: default
---

section
    h1 Practical Python
    br
    h3 Tyr Chen
    br
    div Stay hungry, stay foolish 
    div 2014-04-16

section
    h2 Agenda
    ul
        li.fragment requests
        li.fragment beautifulsoup
        li.fragment Case Study: write a crawler
        li.fragment scrapy
        li.fragment How to release my own package?

section
    section
        h3 Python packages
        ul
            li.fragment What is a package?
            li.fragment easy_install
            li.fragment pip install

section
    section
        h3 requests

section
    section
        h3 beautifulsoup

section
    section
        h3 Case study
        p use beautifulsoup to parse anchors in 
            a(href="http://tchen.me/pages/posts.html") http://tchen.me/pages/posts.html
        p and crawl all the posts in it

section
    section
        h3 scrapy
    section
        h3 What is scrapy?
        ul
            li.fragment a framework to create crawler
            li.fragment pip install scrapy
            li.fragment scrapy startproject test
    section
        h3 case study
        ul
            ol Let's rewrite the crawler we just wrote

section
    section
        h3 how to release a package?
    section
        h3 setup.py
        div.fragment
            pre
                code.
                    #!/usr/bin/env python
                    # coding: utf-8

                    import os
                    import sys
                    import re
                    import vint

                    try:
                        from setuptools import setup
                    except ImportError:
                        from distutils.core import setup


                    def get_version():
                        VERSIONFILE = 'vint/__init__.py'
                        initfile_lines = open(VERSIONFILE, 'rt').readlines()
                        VSRE = r"^__version__ = ['\"]([^'\"]*)['\"]"
                        for line in initfile_lines:
                            mo = re.search(VSRE, line, re.M)
                            if mo:
                                return mo.group(1)
                        raise RuntimeError('Unable to find version string in %s.' % (VERSIONFILE,))

                    if sys.argv[-1] == 'publish':
                        os.system('python setup.py sdist upload')
                        sys.exit()


                    def long_description():
                        return '''
                        The command line client for cerf exam service.
                        '''

                    setup(
                        name='vint',
                        version=get_version(),
                        description='Cerf exam service client to let the applicant to start/finish the exam',
                        long_description=long_description(),
                        license=vint.__license__,
                        author=vint.__author__,
                        author_email=vint.__email__,
                        url='http://tchen.me',
                        download_url='https://github.com/tyrchen/vint',
                        keywords="python cerf exam",
                        packages=['vint'],
                        scripts=['bin/vint'],
                        install_requires=['requests', 'docopt', 'python-dateutil'],
                        module='vint',
                        test_suite='tests',
                        classifiers=[
                            'Intended Audience :: Developers',
                            'Natural Language :: English',
                            'Development Status :: 3 - Alpha',
                            'License :: OSI Approved :: MIT License',
                            'Programming Language :: Python',
                            'Programming Language :: Python :: 2',
                            'Programming Language :: Python :: 2.6',
                            'Programming Language :: Python :: 2.7']
                    )